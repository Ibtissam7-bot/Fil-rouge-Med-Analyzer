<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Explicabilité - MedAnalyzer AI</title>
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
    <header>
        <div class="logo">
            <a href="dashboard.html" class="logo-text">
                <div class="logo-icon"></div> MedAnalyzer <span>AI</span>
            </a>
        </div>
        <nav>
            <a href="dashboard.html">Tableau de Bord</a>
            <a href="diagnostic.html">Nouveau Diagnostic</a>
            <a href="#" class="active">Explicabilité</a>
            <a href="auth.html" class="btn btn-outline-primary cta-nav">Déconnexion</a>
        </nav>
    </header>

    <section class="explicability-main-section">
        <h2 class="section-title">Analyse Détaillée : **COVID-19 (U07.1)**</h2>
        <p class="subtitle" style="text-align:center; color: var(--color-text-light); margin-bottom: 50px;">
            Comprendre les facteurs clés ayant mené au diagnostic (Méthodologie SHAP/LIME).
        </p>

        <div class="explicability-grid">
            
            <div class="factors-panel card">
                <h3>1. Contribution des Symptômes au Diagnostic</h3>
                <p class="panel-description">
                    Visualisation de l'influence positive et négative de chaque donnée sur la probabilité du diagnostic **COVID-19**.
                </p>
                <div class="influence-list">
                    <div class="influence-item positive">
                        <span>Perte d'odorat et de goût</span>
                        <div class="bar-container"><div class="bar" style="width: 95%;">+2.8 points</div></div>
                    </div>
                    <div class="influence-item positive">
                        <span>Toux sèche persistante</span>
                        <div class="bar-container"><div class="bar" style="width: 80%;">+1.9 points</div></div>
                    </div>
                    <div class="influence-item positive">
                        <span>Fièvre (38.5°C)</span>
                        <div class="bar-container"><div class="bar" style="width: 60%;">+1.2 points</div></div>
                    </div>
                    <div class="influence-item negative">
                        <span>Absence de douleurs thoraciques</span>
                        <div class="bar-container"><div class="bar" style="width: 40%;">–0.6 points</div></div>
                    </div>
                    <div class="influence-item neutral">
                        <span>Âge (45 ans)</span>
                        <div class="bar-container"><div class="bar" style="width: 20%;">+0.2 points</div></div>
                    </div>
                </div>
            </div>

            <div class="references-panel card">
                <h3>2. Incertitude & Références Cliniques</h3>
                
                <h4>Gestion de l'Incertitude du Modèle</h4>
                <div class="uncertainty-box">
                    <p>
                        **Score de Confiance : 92.5%.** Le modèle est très confiant. L'incertitude résiduelle est liée à la distinction avec des syndromes grippaux classiques et pourrait être réduite par des tests de confirmation (PCR).
                    </p>
                    <p class="small-text">
                        *Le modèle ne remplace pas le jugement clinique. La décision finale reste celle du professionnel de santé.*
                    </p>
                </div>
                
                <h4 class="mt-4">Littérature Scientifique & Recommandations</h4>
                <ul class="pubmed-list">
                    <li><a href="#">**[PubMed ID: 32345678]** Caractéristiques cliniques de la perte d'odorat dans le COVID-19.</a></li>
                    <li><a href="#">**[ICD-10 U07.1]** Codes internationaux des maladies pour le COVID-19.</a></li>
                    <li><a href="#">**[Recommandations HAS]** Guide de prise en charge des patients COVID-19 en médecine de ville.</a></li>
                    <li><a href="#">Impact de la vaccination sur la sévérité des symptômes.</a></li>
                </ul>
            </div>
        </div>
        
        <div style="text-align:center; margin-top: 60px;">
            <a href="diagnostic.html" class="btn btn-primary btn-large">← Retour au Diagnostic</a>
        </div>
    </section>

    <footer>
        <p>&copy; 2025 MedAnalyzer AI | Assistant de Diagnostic Médical.</p>
    </footer>

    <style>
        /* Styles spécifiques à la page d'explicabilité */
        .explicability-main-section {
            padding-top: 120px;
            background-color: var(--color-background-lightgrey);
        }
        
        .explicability-main-section .section-title {
            color: var(--color-text-dark);
        }

        .explicability-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
        }

        .factors-panel h3, .references-panel h3 {
            color: var(--color-primary-blue);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--color-border-light);
        }
        
        .panel-description {
            color: var(--color-text-light);
            margin-bottom: 30px;
            font-size: 0.95em;
        }

        .influence-list {
            padding: 10px 0;
        }

        .influence-item {
            margin-bottom: 20px;
            padding: 12px 0;
            border-bottom: 1px dashed var(--color-border-light);
        }

        .influence-item span {
            display: block;
            font-weight: 600;
            color: var(--color-text-dark);
            margin-bottom: 8px;
            font-size: 1.05em;
        }
        
        .bar-container {
            background-color: var(--color-background-lightgrey);
            border-radius: 4px;
            height: 20px;
            overflow: hidden;
            position: relative;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .bar {
            height: 100%;
            line-height: 20px;
            font-size: 0.8em;
            color: var(--color-background-white);
            text-align: right;
            padding-right: 8px;
            font-weight: 600;
        }

        .positive .bar {
            background-color: var(--color-accent-turquoise);
        }
        .positive-minor .bar {
            background-color: var(--color-primary-blue);
        }

        .negative .bar-container {
            background-color: var(--color-background-lightgrey);
            direction: rtl; /* Pour faire partir la barre de droite à gauche */
        }

        .negative .bar {
            background-color: #DC3545; /* Rouge pour l'impact négatif */
            text-align: left;
            padding-left: 8px;
            direction: ltr;
        }
        .neutral .bar { /* Pour les facteurs peu influents */
            background-color: var(--color-text-light);
            text-align: left;
            padding-left: 8px;
        }
        
        /* Références */
        .uncertainty-box {
            padding: 20px;
            background-color: #FFF3CD; /* Jaune doux pour l'attention */
            border-left: 5px solid #FFC107; /* Jaune plus vif */
            margin-bottom: 30px;
            border-radius: 8px;
            color: #856404; /* Texte sombre pour le jaune */
            font-size: 0.95em;
        }

        .uncertainty-box p {
            margin-bottom: 10px;
            line-height: 1.5;
        }
        
        .uncertainty-box .small-text {
            font-size: 0.85em;
            color: #a78e44;
            margin-top: 15px;
            border-top: 1px dashed #ffeeba;
            padding-top: 10px;
        }

        .pubmed-list {
            list-style: none;
            padding-left: 0;
        }

        .pubmed-list li {
            padding: 10px 0;
            border-bottom: 1px solid var(--color-border-light);
        }
        
        .pubmed-list li:last-child {
            border-bottom: none;
        }

        .pubmed-list a {
            color: var(--color-primary-blue);
            font-size: 0.95em;
            display: block;
            font-weight: 500;
        }

        .pubmed-list a:hover {
            color: var(--color-accent-turquoise);
            text-decoration: underline;
        }
    </style>
</body>
</html>